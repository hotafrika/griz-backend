package photo

import (
	"github.com/pkg/errors"
	"github.com/stretchr/testify/assert"
	"os"
	"path"
	"testing"
)

func TestSource_validateKey(t *testing.T) {
	type args struct {
		key string
	}
	tests := []struct {
		name    string
		args    args
		wantErr bool
	}{
		{
			name: "non valid",
			args: args{key: "kadfankdfk-"},
			wantErr: true,
		},
		{
			name: "non valid 2",
			args: args{key: ""},
			wantErr: true,
		},
		{
			name: "non valid 3",
			args: args{key: "123NAlsdkfj12312_"},
			wantErr: true,
		},
		{
			name: "valid",
			args: args{key: "123NAlsdkfj12312"},
			wantErr: false,
		},
	}
	s := NewPhotoSource()
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {

			if err := s.validateKey(tt.args.key); (err != nil) != tt.wantErr {
				t.Errorf("validateKey() error = %v, wantErr %v", err, tt.wantErr)
			}
		})
	}
}

func Test_checkScript(t *testing.T) {
	type args struct {
		script string
	}
	tests := []struct{
		name string
		args args
		wantErrBool bool
		wantErr	error
	}{
		{
			name: "valid",
			args: args{script: `window.__additionalDataLoaded('extra',{"shortcode_media":{"__typename":"GraphSidecar","id":"2688916771530366669","shortcode":"CVQ846lqF7N","commenter_count":115137,"dimensions":{"height":1348,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dc8022db8532081a9dc96019faf2cc6c\u0026oe=61792049\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=fed10e0098a33cb04dd2a20eb41ab27d\u0026oe=6178698D\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1348,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null},"owner":{"id":"173560420","profile_pic_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-19/s150x150/67310557_649773548849427_4130659181743046656_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_ohc=ZIqK4kAwCHEAX-L8Ac4\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=969bd534389a908b6df6f6539712cfe4\u0026oe=61792BD3\u0026_nc_sid=78c662","username":"cristiano","followed_by_viewer":false,"has_public_story":true,"is_private":false,"is_unpublished":false,"is_verified":true,"edge_followed_by":{"count":358271347},"edge_owner_to_timeline_media":{"count":3169,"edges":[{"node":{"id":"2689350668073874390","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.169.1349.1349a/s640x640/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=faae91413a752eccde89fedb49178463\u0026oe=61795352\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s150x150/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=7518c3143f71c0403b0e50d3a455431b\u0026oe=617941E2\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s240x240/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a4cb86d748592a4bb2bb0cf9e925f43b\u0026oe=6178F2E8\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s320x320/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=50ab79cf4cd4dc81a772103f1bd8b962\u0026oe=6178C29A\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s480x480/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=16670390b3833b88f9b24cdbfe3f1b78\u0026oe=6177E05F\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.169.1349.1349a/s640x640/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=faae91413a752eccde89fedb49178463\u0026oe=61795352\u0026_nc_sid=78c662"}]}},{"node":{"id":"2688916771530366669","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.179.1440.1440a/s640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c486b206a3e2a6fbbcc2280eef972a28\u0026oe=6178F4CE\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s150x150/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8ef32de35b757902c6d678a907a694a7\u0026oe=617945BE\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s240x240/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=86424942d3ea7542d44672b840c603a3\u0026oe=61777D7C\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s320x320/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c6a11e520026ccc60eb59e22861b7fce\u0026oe=61781046\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s480x480/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=f464e699ad8db55b797fb6f93b729f2f\u0026oe=6177A143\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.179.1440.1440a/s640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c486b206a3e2a6fbbcc2280eef972a28\u0026oe=6178F4CE\u0026_nc_sid=78c662"}]}},{"node":{"id":"2688062026143665954","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.119.956.956a/s640x640/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=df4adc9bc7b4256489716fb2d525dea4\u0026oe=61795420\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s150x150/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=51c6b4b8cb343362c917d985d44d9f21\u0026oe=617934A2\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s240x240/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=f9ad221d457b827074b25c806584af20\u0026oe=61784A2A\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s320x320/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=34f8ecad350b8c8385fa554ef8438282\u0026oe=61777D77\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s480x480/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=d5828c042c99f2dc72b974a1ef34ad8a\u0026oe=61782175\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.119.956.956a/s640x640/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=df4adc9bc7b4256489716fb2d525dea4\u0026oe=61795420\u0026_nc_sid=78c662"}]}}]}},"taken_at_timestamp":1634763879,"edge_media_to_caption":{"edges":[{"node":{"text":"Yes! The Theater Of Dreams is on fire! We are alive! We are Man. United and we never give up! This is Old Trafford! \ud83d\udd34\u26aa\ufe0f\u26ab\ufe0f \ud83d\udcaa\ud83c\udffd"}}]},"edge_media_to_sponsor_user":{"edges":[]},"is_affiliate":false,"is_paid_partnership":false,"media_preview":null,"location":null,"edge_media_to_comment":{"count":144415},"edge_liked_by":{"count":12125908},"coauthor_producers":[],"edge_sidecar_to_children":{"edges":[{"node":{"__typename":"GraphImage","id":"2688916762537831769","shortcode":"CVQ84yNqS1Z","commenter_count":0,"dimensions":{"height":1348,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dc8022db8532081a9dc96019faf2cc6c\u0026oe=61792049\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=fed10e0098a33cb04dd2a20eb41ab27d\u0026oe=6178698D\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1348,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762546362845","shortcode":"CVQ84yOK1nd","commenter_count":0,"dimensions":{"height":1349,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=923785b728c9604fe9f70824a2ae2c38\u0026oe=617835AB\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=39ec7d524bbb13bc956408fd2f234b0a\u0026oe=61778130\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=0cac3561eaad85cef833d3df27fc1395\u0026oe=6178D22C\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1349,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=923785b728c9604fe9f70824a2ae2c38\u0026oe=617835AB\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762521084518","shortcode":"CVQ84yMqaJm","commenter_count":0,"dimensions":{"height":1349,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=4b5383ed4e86ed2c2bf1426d33d8453c\u0026oe=6177A05B\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8736997a0afd939824ffc253e3036348\u0026oe=61785A17\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=2cef625a68bb57d2b38d8928aa3d2901\u0026oe=6177FCF0\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1349,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=4b5383ed4e86ed2c2bf1426d33d8453c\u0026oe=6177A05B\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762554615165","shortcode":"CVQ84yOqUV9","commenter_count":0,"dimensions":{"height":1346,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8eab977357f4cf8670238676c08eb111\u0026oe=6178AF24\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":797,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=54b925bd59a736f8dbd3fcec50fee0f2\u0026oe=61795DC7\u0026_nc_sid=78c662"},{"config_width":750,"config_height":934,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dd95a001900d8cebc0906e5825558969\u0026oe=61784F47\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1346,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8eab977357f4cf8670238676c08eb111\u0026oe=6178AF24\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}}]}}});`},
			wantErrBool: false,
			wantErr: nil,
		},
		{
			name: "not valid script",
			args: args{script: `indow.__additionalDataLoaded('extra',{"shortcode_media":{"__typename":"GraphSidecar","id":"2688916771530366669","shortcode":"CVQ846lqF7N","commenter_count":115137,"dimensions":{"height":1348,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dc8022db8532081a9dc96019faf2cc6c\u0026oe=61792049\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=fed10e0098a33cb04dd2a20eb41ab27d\u0026oe=6178698D\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1348,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null},"owner":{"id":"173560420","profile_pic_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-19/s150x150/67310557_649773548849427_4130659181743046656_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_ohc=ZIqK4kAwCHEAX-L8Ac4\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=969bd534389a908b6df6f6539712cfe4\u0026oe=61792BD3\u0026_nc_sid=78c662","username":"cristiano","followed_by_viewer":false,"has_public_story":true,"is_private":false,"is_unpublished":false,"is_verified":true,"edge_followed_by":{"count":358271347},"edge_owner_to_timeline_media":{"count":3169,"edges":[{"node":{"id":"2689350668073874390","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.169.1349.1349a/s640x640/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=faae91413a752eccde89fedb49178463\u0026oe=61795352\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s150x150/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=7518c3143f71c0403b0e50d3a455431b\u0026oe=617941E2\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s240x240/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a4cb86d748592a4bb2bb0cf9e925f43b\u0026oe=6178F2E8\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s320x320/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=50ab79cf4cd4dc81a772103f1bd8b962\u0026oe=6178C29A\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s480x480/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=16670390b3833b88f9b24cdbfe3f1b78\u0026oe=6177E05F\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.169.1349.1349a/s640x640/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=faae91413a752eccde89fedb49178463\u0026oe=61795352\u0026_nc_sid=78c662"}]}},{"node":{"id":"2688916771530366669","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.179.1440.1440a/s640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c486b206a3e2a6fbbcc2280eef972a28\u0026oe=6178F4CE\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s150x150/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8ef32de35b757902c6d678a907a694a7\u0026oe=617945BE\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s240x240/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=86424942d3ea7542d44672b840c603a3\u0026oe=61777D7C\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s320x320/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c6a11e520026ccc60eb59e22861b7fce\u0026oe=61781046\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s480x480/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=f464e699ad8db55b797fb6f93b729f2f\u0026oe=6177A143\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.179.1440.1440a/s640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c486b206a3e2a6fbbcc2280eef972a28\u0026oe=6178F4CE\u0026_nc_sid=78c662"}]}},{"node":{"id":"2688062026143665954","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.119.956.956a/s640x640/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=df4adc9bc7b4256489716fb2d525dea4\u0026oe=61795420\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s150x150/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=51c6b4b8cb343362c917d985d44d9f21\u0026oe=617934A2\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s240x240/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=f9ad221d457b827074b25c806584af20\u0026oe=61784A2A\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s320x320/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=34f8ecad350b8c8385fa554ef8438282\u0026oe=61777D77\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s480x480/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=d5828c042c99f2dc72b974a1ef34ad8a\u0026oe=61782175\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.119.956.956a/s640x640/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=df4adc9bc7b4256489716fb2d525dea4\u0026oe=61795420\u0026_nc_sid=78c662"}]}}]}},"taken_at_timestamp":1634763879,"edge_media_to_caption":{"edges":[{"node":{"text":"Yes! The Theater Of Dreams is on fire! We are alive! We are Man. United and we never give up! This is Old Trafford! \ud83d\udd34\u26aa\ufe0f\u26ab\ufe0f \ud83d\udcaa\ud83c\udffd"}}]},"edge_media_to_sponsor_user":{"edges":[]},"is_affiliate":false,"is_paid_partnership":false,"media_preview":null,"location":null,"edge_media_to_comment":{"count":144415},"edge_liked_by":{"count":12125908},"coauthor_producers":[],"edge_sidecar_to_children":{"edges":[{"node":{"__typename":"GraphImage","id":"2688916762537831769","shortcode":"CVQ84yNqS1Z","commenter_count":0,"dimensions":{"height":1348,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dc8022db8532081a9dc96019faf2cc6c\u0026oe=61792049\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=fed10e0098a33cb04dd2a20eb41ab27d\u0026oe=6178698D\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1348,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762546362845","shortcode":"CVQ84yOK1nd","commenter_count":0,"dimensions":{"height":1349,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=923785b728c9604fe9f70824a2ae2c38\u0026oe=617835AB\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=39ec7d524bbb13bc956408fd2f234b0a\u0026oe=61778130\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=0cac3561eaad85cef833d3df27fc1395\u0026oe=6178D22C\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1349,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=923785b728c9604fe9f70824a2ae2c38\u0026oe=617835AB\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762521084518","shortcode":"CVQ84yMqaJm","commenter_count":0,"dimensions":{"height":1349,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=4b5383ed4e86ed2c2bf1426d33d8453c\u0026oe=6177A05B\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8736997a0afd939824ffc253e3036348\u0026oe=61785A17\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=2cef625a68bb57d2b38d8928aa3d2901\u0026oe=6177FCF0\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1349,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=4b5383ed4e86ed2c2bf1426d33d8453c\u0026oe=6177A05B\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762554615165","shortcode":"CVQ84yOqUV9","commenter_count":0,"dimensions":{"height":1346,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8eab977357f4cf8670238676c08eb111\u0026oe=6178AF24\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":797,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=54b925bd59a736f8dbd3fcec50fee0f2\u0026oe=61795DC7\u0026_nc_sid=78c662"},{"config_width":750,"config_height":934,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dd95a001900d8cebc0906e5825558969\u0026oe=61784F47\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1346,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8eab977357f4cf8670238676c08eb111\u0026oe=6178AF24\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}}]}}});`},
			wantErrBool: true,
			wantErr: notNecScript,
		},
		{
			name: "not valid script 2",
			args: args{script: ``},
			wantErrBool: true,
			wantErr: notNecScript,
		},
		{
			name: "not valid json",
			args: args{script: `window.__additionalDataLoaded('extra',{"shortcode_media":{"__typename":"GraphSidecar","id":"2688916771530366669","shortcode":"CVQ846lqF7N","commenter_count":115137,"dimensions":{"height":1348,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dc8022db8532081a9dc96019faf2cc6c\u0026oe=61792049\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=fed10e0098a33cb04dd2a20eb41ab27d\u0026oe=6178698D\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1348,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null},"owner":{"id":"173560420","profile_pic_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-19/s150x150/67310557_649773548849427_4130659181743046656_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_ohc=ZIqK4kAwCHEAX-L8Ac4\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=969bd534389a908b6df6f6539712cfe4\u0026oe=61792BD3\u0026_nc_sid=78c662","username":"cristiano","followed_by_viewer":false,"has_public_story":true,"is_private":false,"is_unpublished":false,"is_verified":true,"edge_followed_by":{"count":358271347},"edge_owner_to_timeline_media":{"count":3169,"edges":[{"node":{"id":"2689350668073874390","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.169.1349.1349a/s640x640/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=faae91413a752eccde89fedb49178463\u0026oe=61795352\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s150x150/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=7518c3143f71c0403b0e50d3a455431b\u0026oe=617941E2\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s240x240/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a4cb86d748592a4bb2bb0cf9e925f43b\u0026oe=6178F2E8\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s320x320/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=50ab79cf4cd4dc81a772103f1bd8b962\u0026oe=6178C29A\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s480x480/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=16670390b3833b88f9b24cdbfe3f1b78\u0026oe=6177E05F\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.169.1349.1349a/s640x640/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=faae91413a752eccde89fedb49178463\u0026oe=61795352\u0026_nc_sid=78c662"}]}},{"node":{"id":"2688916771530366669","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.179.1440.1440a/s640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c486b206a3e2a6fbbcc2280eef972a28\u0026oe=6178F4CE\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s150x150/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8ef32de35b757902c6d678a907a694a7\u0026oe=617945BE\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s240x240/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=86424942d3ea7542d44672b840c603a3\u0026oe=61777D7C\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s320x320/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c6a11e520026ccc60eb59e22861b7fce\u0026oe=61781046\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s480x480/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=f464e699ad8db55b797fb6f93b729f2f\u0026oe=6177A143\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.179.1440.1440a/s640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c486b206a3e2a6fbbcc2280eef972a28\u0026oe=6178F4CE\u0026_nc_sid=78c662"}]}},{"node":{"id":"2688062026143665954","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.119.956.956a/s640x640/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=df4adc9bc7b4256489716fb2d525dea4\u0026oe=61795420\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s150x150/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=51c6b4b8cb343362c917d985d44d9f21\u0026oe=617934A2\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s240x240/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=f9ad221d457b827074b25c806584af20\u0026oe=61784A2A\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s320x320/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=34f8ecad350b8c8385fa554ef8438282\u0026oe=61777D77\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s480x480/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=d5828c042c99f2dc72b974a1ef34ad8a\u0026oe=61782175\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.119.956.956a/s640x640/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=df4adc9bc7b4256489716fb2d525dea4\u0026oe=61795420\u0026_nc_sid=78c662"}]}}]}},"taken_at_timestamp":1634763879,"edge_media_to_caption":{"edges":[{"node":{"text":"Yes! The Theater Of Dreams is on fire! We are alive! We are Man. United and we never give up! This is Old Trafford! \ud83d\udd34\u26aa\ufe0f\u26ab\ufe0f \ud83d\udcaa\ud83c\udffd"}}]},"edge_media_to_sponsor_user":{"edges":[]},"is_affiliate":false,"is_paid_partnership":false,"media_preview":null,"location":null,"edge_media_to_comment":{"count":144415},"edge_liked_by":{"count":12125908},"coauthor_producers":[],"edge_sidecar_to_children":{"edges":[{"node":{"__typename":"GraphImage","id":"2688916762537831769","shortcode":"CVQ84yNqS1Z","commenter_count":0,"dimensions":{"height":1348,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dc8022db8532081a9dc96019faf2cc6c\u0026oe=61792049\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=fed10e0098a33cb04dd2a20eb41ab27d\u0026oe=6178698D\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1348,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762546362845","shortcode":"CVQ84yOK1nd","commenter_count":0,"dimensions":{"height":1349,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=923785b728c9604fe9f70824a2ae2c38\u0026oe=617835AB\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=39ec7d524bbb13bc956408fd2f234b0a\u0026oe=61778130\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=0cac3561eaad85cef833d3df27fc1395\u0026oe=6178D22C\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1349,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=923785b728c9604fe9f70824a2ae2c38\u0026oe=617835AB\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762521084518","shortcode":"CVQ84yMqaJm","commenter_count":0,"dimensions":{"height":1349,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=4b5383ed4e86ed2c2bf1426d33d8453c\u0026oe=6177A05B\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8736997a0afd939824ffc253e3036348\u0026oe=61785A17\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=2cef625a68bb57d2b38d8928aa3d2901\u0026oe=6177FCF0\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1349,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=4b5383ed4e86ed2c2bf1426d33d8453c\u0026oe=6177A05B\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762554615165","shortcode":"CVQ84yOqUV9","commenter_count":0,"dimensions":{"height":1346,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8eab977357f4cf8670238676c08eb111\u0026oe=6178AF24\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":797,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=54b925bd59a736f8dbd3fcec50fee0f2\u0026oe=61795DC7\u0026_nc_sid=78c662"},{"config_width":750,"config_height":934,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dd95a001900d8cebc0906e5825558969\u0026oe=61784F47\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1346,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8eab977357f4cf8670238676c08eb111\u0026oe=6178AF24\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}}]}}})`},
			wantErrBool: true,
			wantErr: errors.New("some"),
		},
		{
			name: "not valid json 2",
			args: args{script: `window.__additionalDataLoaded('extra',{"shortcode_media":{"__typename":"GraphSidecar","id":"2688916771530366669","shortcode":"CVQ846lqF7N","commenter_count":115137,"dimensions":{"height":1348,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dc8022db8532081a9dc96019faf2cc6c\u0026oe=61792049\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=fed10e0098a33cb04dd2a20eb41ab27d\u0026oe=6178698D\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1348,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null},"owner":{"id":"173560420","profile_pic_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-19/s150x150/67310557_649773548849427_4130659181743046656_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_ohc=ZIqK4kAwCHEAX-L8Ac4\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=969bd534389a908b6df6f6539712cfe4\u0026oe=61792BD3\u0026_nc_sid=78c662","username":"cristiano","followed_by_viewer":false,"has_public_story":true,"is_private":false,"is_unpublished":false,"is_verified":true,"edge_followed_by":{"count":358271347},"edge_owner_to_timeline_media":{"count":3169,"edges":[{"node":{"id":"2689350668073874390","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.169.1349.1349a/s640x640/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=faae91413a752eccde89fedb49178463\u0026oe=61795352\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s150x150/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=7518c3143f71c0403b0e50d3a455431b\u0026oe=617941E2\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s240x240/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a4cb86d748592a4bb2bb0cf9e925f43b\u0026oe=6178F2E8\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s320x320/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=50ab79cf4cd4dc81a772103f1bd8b962\u0026oe=6178C29A\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.169.1349.1349a/s480x480/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=16670390b3833b88f9b24cdbfe3f1b78\u0026oe=6177E05F\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.169.1349.1349a/s640x640/246580829_419942849584646_5989995326428061685_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=P8ooAqVaaN0AX9T1bqp\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=faae91413a752eccde89fedb49178463\u0026oe=61795352\u0026_nc_sid=78c662"}]}},{"node":{"id":"2688916771530366669","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.179.1440.1440a/s640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c486b206a3e2a6fbbcc2280eef972a28\u0026oe=6178F4CE\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s150x150/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8ef32de35b757902c6d678a907a694a7\u0026oe=617945BE\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s240x240/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=86424942d3ea7542d44672b840c603a3\u0026oe=61777D7C\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s320x320/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c6a11e520026ccc60eb59e22861b7fce\u0026oe=61781046\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.179.1440.1440a/s480x480/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=f464e699ad8db55b797fb6f93b729f2f\u0026oe=6177A143\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.179.1440.1440a/s640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=c486b206a3e2a6fbbcc2280eef972a28\u0026oe=6178F4CE\u0026_nc_sid=78c662"}]}},{"node":{"id":"2688062026143665954","thumbnail_src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.119.956.956a/s640x640/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=df4adc9bc7b4256489716fb2d525dea4\u0026oe=61795420\u0026_nc_sid=78c662","thumbnail_resources":[{"config_width":150,"config_height":150,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s150x150/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=51c6b4b8cb343362c917d985d44d9f21\u0026oe=617934A2\u0026_nc_sid=78c662"},{"config_width":240,"config_height":240,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s240x240/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=f9ad221d457b827074b25c806584af20\u0026oe=61784A2A\u0026_nc_sid=78c662"},{"config_width":320,"config_height":320,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s320x320/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=34f8ecad350b8c8385fa554ef8438282\u0026oe=61777D77\u0026_nc_sid=78c662"},{"config_width":480,"config_height":480,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/c0.119.956.956a/s480x480/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=d5828c042c99f2dc72b974a1ef34ad8a\u0026oe=61782175\u0026_nc_sid=78c662"},{"config_width":640,"config_height":640,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.119.956.956a/s640x640/246243563_1110796012994301_4002525241614074507_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=Ownwjut2ZcAAX83nK3i\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=df4adc9bc7b4256489716fb2d525dea4\u0026oe=61795420\u0026_nc_sid=78c662"}]}}]}},"taken_at_timestamp":1634763879,"edge_media_to_caption":{"edges":[{"node":{"text":"Yes! The Theater Of Dreams is on fire! We are alive! We are Man. United and we never give up! This is Old Trafford! \ud83d\udd34\u26aa\ufe0f\u26ab\ufe0f \ud83d\udcaa\ud83c\udffd"}}]},"edge_media_to_sponsor_user":{"edges":[]},"is_affiliate":false,"is_paid_partnership":false,"media_preview":null,"location":null,"edge_media_to_comment":{"count":144415},"edge_liked_by":{"count":12125908},"coauthor_producers":[],"edge_sidecar_to_children":{"edges":[{"node":{"__typename":"GraphImage","id":"2688916762537831769","shortcode":"CVQ84yNqS1Z","commenter_count":0,"dimensions":{"height":1348,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dc8022db8532081a9dc96019faf2cc6c\u0026oe=61792049\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=fed10e0098a33cb04dd2a20eb41ab27d\u0026oe=6178698D\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1348,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246445792_644006460097717_4034804799863414929_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=AplQkY9ITxYAX-Bim0W\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=a657c17eaaec20c73bc475980066f9e6\u0026oe=617934CE\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762546362845","shortcode":"CVQ84yOK1nd","commenter_count":0,"dimensions":{"height":1349,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=923785b728c9604fe9f70824a2ae2c38\u0026oe=617835AB\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=39ec7d524bbb13bc956408fd2f234b0a\u0026oe=61778130\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=0cac3561eaad85cef833d3df27fc1395\u0026oe=6178D22C\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1349,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246842362_117431074044919_8693014975677404233_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=cqwDuFBNnVAAX9_LQCy\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=923785b728c9604fe9f70824a2ae2c38\u0026oe=617835AB\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762521084518","shortcode":"CVQ84yMqaJm","commenter_count":0,"dimensions":{"height":1349,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=4b5383ed4e86ed2c2bf1426d33d8453c\u0026oe=6177A05B\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":799,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8736997a0afd939824ffc253e3036348\u0026oe=61785A17\u0026_nc_sid=78c662"},{"config_width":750,"config_height":936,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=2cef625a68bb57d2b38d8928aa3d2901\u0026oe=6177FCF0\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1349,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246702048_1077228059772524_7582159922165665433_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=96jFHagL6LAAX8q2zv0\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=4b5383ed4e86ed2c2bf1426d33d8453c\u0026oe=6177A05B\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}},{"node":{"__typename":"GraphImage","id":"2688916762554615165","shortcode":"CVQ84yOqUV9","commenter_count":0,"dimensions":{"height":1346,"width":1080},"display_url":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8eab977357f4cf8670238676c08eb111\u0026oe=6178AF24\u0026_nc_sid=78c662","display_resources":[{"config_width":640,"config_height":797,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p640x640/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=54b925bd59a736f8dbd3fcec50fee0f2\u0026oe=61795DC7\u0026_nc_sid=78c662"},{"config_width":750,"config_height":934,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/p750x750/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=dd95a001900d8cebc0906e5825558969\u0026oe=61784F47\u0026_nc_sid=78c662"},{"config_width":1080,"config_height":1346,"src":"https://scontent-waw1-1.cdninstagram.com/v/t51.2885-15/e35/p1080x1080/246777269_394172059021915_122220853050947693_n.jpg?_nc_ht=scontent-waw1-1.cdninstagram.com\u0026_nc_cat=1\u0026_nc_ohc=tXAzSSx-O1kAX_kcy5l\u0026edm=AJBgZrYBAAAA\u0026ccb=7-4\u0026oh=8eab977357f4cf8670238676c08eb111\u0026oe=6178AF24\u0026_nc_sid=78c662"}],"is_video":false,"media_overlay_info":null,"sharing_friction_info":{"should_have_sharing_friction":false,"bloks_app_url":null}}}]}});`},
			wantErrBool: true,
			wantErr: errors.New("some"),
		},
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			var er EmbedResponse
			err := checkScript(&er, tt.args.script)
			if tt.wantErrBool {
				assert.Error(t, err)
				if errors.Is(tt.wantErr, notNecScript) {
					assert.ErrorIs(t, err, notNecScript)
				} else {
					assert.NotErrorIs(t, err, notNecScript)
				}
			} else {
				assert.NoError(t, err)
			}
		})
	}
}

func Test_parseBody(t *testing.T) {
	tests := []struct{
		name string
		filename string
		wantLen int
		wantErrBool bool
	}{
		{
			name: "valid",
			filename: "httpbody_CVQ846lqF7N.html",
			wantLen: 4,
			wantErrBool: false,
		},
		{
			name: "valid 2",
			filename: "httpbody_CVSfi8PALPW.html",
			wantLen: 1,
			wantErrBool: false,
		},
		{
			name: "invalid -> video",
			filename: "httpbody_CVV7UBjrNbX.html",
			wantLen: 0,
			wantErrBool: false,
		},
		{
			name: "valid 3",
			filename: "httpbody_CVBO7FFAF8n.html",
			wantLen: 2,
			wantErrBool: false,
		},
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			var er EmbedResponse
			filepath := path.Join("testdata", tt.filename)
			file, err := os.Open(filepath)
			assert.NoError(t, err)
			err = parseBodyByScript(&er, file)
			if tt.wantErrBool {
				assert.Error(t, err)
			}
			s := er.getURLs()
			assert.Equal(t, tt.wantLen, len(s))
		})
	}
}
